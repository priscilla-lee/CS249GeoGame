<head>
    <title>CS249GeoGame</title>
</head>



<!---------------------------------------------------------------------------------------------
| BODY: prompts user to log in, if already logged in then displays home menu or plays game               
---------------------------------------------------------------------------------------------->
<body>
	<div style="padding: 0px !important" class="container-fluid">
		{{#if currentUser}}
			{{#if displayHome}}{{> home}}{{/if}}
			{{#if displayGame}}{{> game}}{{/if}}
		{{else}}
			{{> plsLogin}}
		{{/if}}
	</div>
</body>



<!---------------------------------------------------------------------------------------------
| PLSLOGIN Template: short description about GeoGame, and prompts user to log in                
---------------------------------------------------------------------------------------------->
<template name="plsLogin">
	{{> nav}}
	<div class="jumbotron">
		<h1>Geography Game</h1>
		<p>Please log in.</p>
	</div>
</template>



<!---------------------------------------------------------------------------------------------
| NAV Template: Just the game name & the login buttons                  
---------------------------------------------------------------------------------------------->
<template name="nav">
	<div class="navbar navbar-default" role="navigation">
		<div class="navbar-header">
			<a class="navbar-brand pointer">Geo Game</a>
		</div>
		<div class="navbar-collapse collapse">
			<ul class="nav navbar-nav navbar-right">{{> loginButtons}}</ul>
		</div>
	</div>
</template>



<!---------------------------------------------------------------------------------------------
| HOME Template: displays game's home menu buttons               
---------------------------------------------------------------------------------------------->
<template name="home">
	{{> nav}}
	<div class="well col-md-6 col-md-offset-3">
		<div class="btn btn-block btn-info btn-lg" id="playGame">Play Game</div>
		{{> stats}}
		{{> recommend}}
		{{> photoalbum}}
		{{> instructions}}
	</div>
</template>



<!---------------------------------------------------------------------------------------------
| GAME Template: displays the game (static map, street view, map canvas, and game buttons)                  
---------------------------------------------------------------------------------------------->
<template name="game">
    {{#if gameDone}}
        <div class="col-md-12">
            No puzzles left! You've solved all the challenges! 
            Recommend more puzzles or wait until more are added! Thanks for playing!
        </div>
    {{else}}
        <div class="col-md-6" style="display: {{displaySM}};" id="staticmap"><img src="{{staticmap}}" width="100%" height="100%"></div>
        <div class="col-md-6" style="display: {{displaySV}};" id="streetview">{{> streetView}}</div>
        <div class="col-md-6" id="mapcanvas">{{> map}}</div>
    {{/if}}
	{{> gameButtons}}
	{{> next}}
</template>



<!---------------------------------------------------------------------------------------------
| MAP Template: Google Maps map canvas                
---------------------------------------------------------------------------------------------->
<template name="map">
  <div class="map-container">
    {{> googleMap name="map" options=mapOptions}}
  </div>
</template>



<!---------------------------------------------------------------------------------------------
| STREET VIEW Template: Google Maps street view panorama (plus a picture button)                  
---------------------------------------------------------------------------------------------->
<template name="streetView">
  <div class="map-container" id="sv-container">
    {{> googleMap type="StreetViewPanorama" id="streetView" name="streetView" options=mapOptions}}
	<button type="button" class="btn btn-danger" id="picBtn">
		<span class="glyphicon glyphicon-camera" aria-hidden="true"></span>
	</button>
	{{> pic}}
  </div>
</template>



<!---------------------------------------------------------------------------------------------
| GAME BUTTONS Template: the row of buttons on bottom of screen when playing the game                 
---------------------------------------------------------------------------------------------->
<template name="gameButtons">
	<div class="btn-group btn-group-justified" id="gameButtons">
		<div class="btn btn-info btn-lg goHome">Return Home</div>
		<div class="btn btn-primary btn-lg streetView">Street View</div>
		<div class="btn btn-success btn-lg">Time {{time}}</div>
		<div class="btn btn-warning btn-lg userScore">Score: {{userscore}}</div>
	</div>
	{{> list}}
</template>



<!---------------------------------------------------------------------------------------------
| PIC Template: a simple modal that only contains the static image of the picture taken                  
---------------------------------------------------------------------------------------------->
<template name="pic">
	<div class="modal fade" id="picModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
		<div class="modal-content">
		  <div class="modal-body">
			<img src="{{svPic}}" width="100%" height="100%">
		  </div>
		</div>
	  </div>
	</div>
</template>



<!---------------------------------------------------------------------------------------------
| LIST Template: modal that allows users to see the challenges they've solved                  
---------------------------------------------------------------------------------------------->
<template name="list">
	<div class="modal fade" id="listModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
		<div class="modal-content">
		  <div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h4 class="modal-title" id="myModalLabel">Solved {{numSolved}} out of {{numTotal}}</h4>
		  </div>
		  <div class="modal-body">
			<div class="container-fluid">
				<table class="table">
					<tbody>
						{{#each places}}
						<tr>
						{{#if usersolved}}
							<td style="background-color: #93d093"><p class="text-center">{{this.name}} ({{time}})</p></td>
						{{else}}
							<td style="background-color: #ddd"><p class="text-center">???</p></td>
						{{/if}}
						</tr>
						{{/each}}
					</tbody>
				</table>
			</div>
		  </div>
		</div>
	  </div>
	</div>
</template>



<!---------------------------------------------------------------------------------------------
| NEXT Template: modal that pops up when user has completed a puzzle                  
---------------------------------------------------------------------------------------------->
<template name="next">
	<div class="modal fade" id="nextModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" data-keyboard="false" data-backdrop="static">
	  <div class="modal-dialog">
		<div class="modal-content">
		  <div class="modal-body">
            <h3>You found <span class="placeName">{{placeName}}</span>!</h3><br>
            <table class="table">
            <tbody>
                <tr>
                    <td>Time solved <span class="bold-yellow">{{milliseconds}}</span></td>
                    <td>{{timePts}} points</td>
                </tr>
                <tr>
                    <td><span class="bold-yellow">{{picsTaken}}</span> pictures taken</td>
                    <td>{{picPts}} points</td>
                </tr>
                <tr class="info">
                    <td>Total</td>
                    <td><span class="bold-yellow">{{totPts}} points</span></td>
                </tr>
            </tbody>
            </table>     
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-primary" id="nextlevel">Next</button>
		  </div>
		</div>
	  </div>
	</div>
</template>



<!---------------------------------------------------------------------------------------------
| STATS Template: displays the top10 leaderboard & a d3 scatterplot                  
---------------------------------------------------------------------------------------------->
<template name="stats">
	<div class="btn btn-block btn-primary btn-lg" id="viewStats" data-toggle="modal" data-target="#statsModal">Stats</div>

	<div class="modal fade bs-example-modal-lg" id="statsModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
	  <div class="modal-dialog modal-lg modalmargins">
		<div class="modal-content modalwidth">
		  <div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h4 class="modal-title" id="myModalLabel">High Score Board &amp; Your Stats</h4>
		  </div>
		  <div class="modal-body">
			<div class="container-fluid">
                <div class="col-md-5">
                    <table class="table table-hover" id="highScoreTable">
                      <thead>
                        <tr><th>#</th><th>Name</th><th>Score</th><th>Avg Time</th></tr>
                      </thead>
                      <tbody class="highScores">
                          {{#each top10Players}}
                          <tr class="{{this.class}}">
                              <td>{{this.rank}}</td>
                              <td>{{this.name}}</td>
                              <td>{{this.score}} pts</td>
                              <td>{{this.avgTime}} secs</td>
                          </tr>
                          {{/each}}
                      </tbody>
                    </table> 			
                </div>
                <div class="col-md-7">
                    {{> d3}}
                </div>
            </div>
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-primary" data-dismiss="modal">Done</button>
		  </div>
		</div>
	  </div>
	</div>
</template>



<!---------------------------------------------------------------------------------------------
| D3 VISUALIZATIONS Template: will contain a scatterplot                  
---------------------------------------------------------------------------------------------->
<template name="d3">
	<div class="well" style="height: 100%" id="d3container"></div>
</template>



<!---------------------------------------------------------------------------------------------
| RECOMMEND Template: a modal that allows users to recommend more places to add to the game                  
---------------------------------------------------------------------------------------------->
<template name="recommend">
	<div class="btn btn-block btn-success btn-lg" data-toggle="modal" data-target="#recommendModal">Recommend</div>

	<div class="modal fade bs-example-modal-lg" id="recommendModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
	  <div class="modal-dialog modal-lg modalmargins">
		<div class="modal-content modalwidth">
		  <div class="modal-header"> 
                <div class="input-group">
				<input type="text" class="form-control" id="placeRec" name="placeRec" placeHolder="Recommend a new location">
				<span class="input-group-btn">
					<button class="btn btn-primary recPlace" type="button">Recommend</button>
				</span>
			</div>
		  </div>
		  <div class="modal-body">
			<div class="container-fluid">
				{{#each places}}
				<div class="col-sm-6 col-md-4">
					<div class="thumbnail">
					<div class="caption">
						<h5>
							<span class="badge" style="background-color: #337ab7">{{this.recommended}}</span>
							{{this.name}}
							{{#if canDelete}}
								<span class="deleteRec glyphicon glyphicon-remove text-right" aria-hidden="true"></span>
							{{else}}
								<span class="thumbsUp {{#if thumbedUp}} thumbedUp {{/if}} glyphicon glyphicon-thumbs-up text-right" aria-hidden="true"></span>
							{{/if}}
						</h5>
					</div>
					<img src="{{this.thumbnail}}">
					</div>
				</div>
				{{/each}}
			</div>
		  </div>
		</div>
	  </div>
	</div>
</template>



<!---------------------------------------------------------------------------------------------
| PHOTO ALBUM Template: a modal that allows users to view the pictures they've taken                  
---------------------------------------------------------------------------------------------->
<template name="photoalbum">
	<div class="btn btn-block btn-warning btn-lg" data-toggle="modal" data-target="#albumModal">Photo Album</div>

	<div class="modal fade bs-example-modal-lg" id="albumModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
	  <div class="modal-dialog modal-lg modalmargins">
		<div class="modal-content modalwidth">
		  <div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h4 class="modal-title" id="myModalLabel">Photo Album</h4>
		  </div>
		  <div class="modal-body">
			<div class="container-fluid">
				{{#each userPics}}
				  <div class="col-xs-6 col-md-3 thumbnail overlayContainer">
					  <img src="{{this.pic}}">
                        <div class="overlayCaption">
                            <a href="{{this.pic}}" download="">
                                <span style="font-size: 300%" class="glyphicon glyphicon-download-alt"></span>
                            </a>
                            &nbsp;
                            <span style="font-size: 300%" class="glyphicon glyphicon-remove deletePic"></span>
                        </div>
				  </div>
				{{/each}}
			</div>
		  </div>
		</div>
	  </div>
	</div>
</template>



<!---------------------------------------------------------------------------------------------
| INSTRUCTIONS Template: modal that explains the instructions for this game                  
---------------------------------------------------------------------------------------------->
<template name="instructions">
	<div class="btn btn-block btn-danger btn-lg" data-toggle="modal" data-target="#instructionsModal">Instructions</div>

	<div class="modal fade bs-example-modal-lg" id="instructionsModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
	  <div class="modal-dialog modal-lg modalmargins">
		<div class="modal-content modalwidth">
		  <div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h4 class="modal-title" id="myModalLabel">Instructions</h4>
		  </div>
		  <div class="modal-body">
			Instructions will go here...The goal of the game is to explore the 
			zoomable google maps window (on the right) until its image matches the 
			static image of the famous place (on the left). 
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-primary" data-dismiss="modal">Got it</button>
		  </div>
		</div>
	  </div>
	</div>
</template>